{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 18, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/stashy/Desktop/Projects/Trend/src/lib/supabase.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js';\r\n\r\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!;\r\nconst supabaseKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!;\r\n\r\nexport const supabase = createClient(supabaseUrl, supabaseKey);\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM;AACN,MAAM;AAEC,MAAM,WAAW,IAAA,8LAAY,EAAC,aAAa"}},
    {"offset": {"line": 31, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/stashy/Desktop/Projects/Trend/src/lib/auth.ts"],"sourcesContent":["import { SignJWT, jwtVerify } from 'jose';\r\nimport { cookies } from 'next/headers';\r\nimport { supabase } from './supabase';\r\n\r\nconst JWT_SECRET = new TextEncoder().encode(process.env.JWT_SECRET || 'fallback-secret');\r\n\r\nexport interface JWTPayload {\r\n    userId: string;\r\n    discordId: string;\r\n    isAdmin: boolean;\r\n}\r\n\r\nexport async function createSession(userId: string, discordId: string, isAdmin: boolean, ip?: string, userAgent?: string) {\r\n    const token = await new SignJWT({ userId, discordId, isAdmin })\r\n        .setProtectedHeader({ alg: 'HS256' })\r\n        .setExpirationTime('7d')\r\n        .sign(JWT_SECRET);\r\n\r\n    const expiresAt = new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString();\r\n\r\n    await supabase.from('sessions').insert({\r\n        user_id: userId,\r\n        token,\r\n        ip,\r\n        user_agent: userAgent,\r\n        expires_at: expiresAt,\r\n    });\r\n\r\n    return token;\r\n}\r\n\r\nexport async function verifySession(token: string): Promise<JWTPayload | null> {\r\n    try {\r\n        const { payload } = await jwtVerify(token, JWT_SECRET);\r\n\r\n        console.log('verifySession - JWT payload:', payload);\r\n\r\n        // Simple query without join\r\n        const { data: session, error: sessionError } = await supabase\r\n            .from('sessions')\r\n            .select('*')\r\n            .eq('token', token)\r\n            .single();\r\n\r\n        if (sessionError) {\r\n            console.error('verifySession - Session query error:', sessionError);\r\n            return null;\r\n        }\r\n\r\n        if (!session || new Date(session.expires_at) < new Date()) {\r\n            console.log('verifySession - Session expired or not found');\r\n            return null;\r\n        }\r\n\r\n        // Get user separately\r\n        const { data: user, error: userError } = await supabase\r\n            .from('users')\r\n            .select('*')\r\n            .eq('id', session.user_id)\r\n            .single();\r\n\r\n        if (userError || !user) {\r\n            console.error('verifySession - User query error:', userError);\r\n            return null;\r\n        }\r\n\r\n        console.log('verifySession - Success, user:', user.username);\r\n\r\n        return {\r\n            userId: session.user_id,\r\n            discordId: user.discord_id,\r\n            isAdmin: user.is_admin,\r\n        };\r\n    } catch (error) {\r\n        console.error('verifySession - JWT or other error:', error);\r\n        return null;\r\n    }\r\n}\r\n\r\nexport async function getCurrentUser() {\r\n    const cookieStore = await cookies();\r\n    const token = cookieStore.get('session')?.value;\r\n\r\n    if (!token) return null;\r\n\r\n    const payload = await verifySession(token);\r\n    if (!payload) return null;\r\n\r\n    const { data: user } = await supabase\r\n        .from('users')\r\n        .select('*')\r\n        .eq('id', payload.userId)\r\n        .single();\r\n\r\n    return user;\r\n}\r\n\r\nexport async function isUserAuthorized(userId: string): Promise<boolean> {\r\n    const { data: user } = await supabase\r\n        .from('users')\r\n        .select('*')\r\n        .eq('id', userId)\r\n        .single();\r\n\r\n    if (!user) return false;\r\n    if (user.is_admin) return true;\r\n    if (!user.is_authorized) return false;\r\n    if (user.auth_expiry && new Date(user.auth_expiry) < new Date()) return false;\r\n\r\n    return true;\r\n}\r\n\r\nexport function getDiscordOAuthUrl() {\r\n    const params = new URLSearchParams({\r\n        client_id: process.env.DISCORD_CLIENT_ID!,\r\n        redirect_uri: process.env.DISCORD_REDIRECT_URI!,\r\n        response_type: 'code',\r\n        scope: 'identify email',\r\n    });\r\n\r\n    return `https://discord.com/api/oauth2/authorize?${params.toString()}`;\r\n}\r\n\r\nexport async function exchangeCodeForToken(code: string) {\r\n    const response = await fetch('https://discord.com/api/oauth2/token', {\r\n        method: 'POST',\r\n        headers: {\r\n            'Content-Type': 'application/x-www-form-urlencoded',\r\n        },\r\n        body: new URLSearchParams({\r\n            client_id: process.env.DISCORD_CLIENT_ID!,\r\n            client_secret: process.env.DISCORD_CLIENT_SECRET!,\r\n            grant_type: 'authorization_code',\r\n            code,\r\n            redirect_uri: process.env.DISCORD_REDIRECT_URI!,\r\n        }),\r\n    });\r\n\r\n    return response.json();\r\n}\r\n\r\nexport async function getDiscordUser(accessToken: string) {\r\n    const response = await fetch('https://discord.com/api/users/@me', {\r\n        headers: {\r\n            Authorization: `Bearer ${accessToken}`,\r\n        },\r\n    });\r\n\r\n    return response.json();\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 157, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/app/page.module.css [app-rsc] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"badge\": \"page-module___8aEwW__badge\",\n  \"badgeDot\": \"page-module___8aEwW__badgeDot\",\n  \"buttonGradientShift\": \"page-module___8aEwW__buttonGradientShift\",\n  \"checkBounce\": \"page-module___8aEwW__checkBounce\",\n  \"container\": \"page-module___8aEwW__container\",\n  \"content\": \"page-module___8aEwW__content\",\n  \"description\": \"page-module___8aEwW__description\",\n  \"disclaimer\": \"page-module___8aEwW__disclaimer\",\n  \"discordButton\": \"page-module___8aEwW__discordButton\",\n  \"fadeInBlur\": \"page-module___8aEwW__fadeInBlur\",\n  \"fadeInScale\": \"page-module___8aEwW__fadeInScale\",\n  \"feature\": \"page-module___8aEwW__feature\",\n  \"features\": \"page-module___8aEwW__features\",\n  \"footer\": \"page-module___8aEwW__footer\",\n  \"glow\": \"page-module___8aEwW__glow\",\n  \"glowSecondary\": \"page-module___8aEwW__glowSecondary\",\n  \"glowTertiary\": \"page-module___8aEwW__glowTertiary\",\n  \"gradientShift\": \"page-module___8aEwW__gradientShift\",\n  \"main\": \"page-module___8aEwW__main\",\n  \"orbFloatEnhanced\": \"page-module___8aEwW__orbFloatEnhanced\",\n  \"orbFloatReverse\": \"page-module___8aEwW__orbFloatReverse\",\n  \"orbPulseEnhanced\": \"page-module___8aEwW__orbPulseEnhanced\",\n  \"particles\": \"page-module___8aEwW__particles\",\n  \"particlesDrift\": \"page-module___8aEwW__particlesDrift\",\n  \"pulseLive\": \"page-module___8aEwW__pulseLive\",\n  \"slideInFeature\": \"page-module___8aEwW__slideInFeature\",\n  \"title\": \"page-module___8aEwW__title\",\n  \"titleAccent\": \"page-module___8aEwW__titleAccent\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 191, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/stashy/Desktop/Projects/Trend/src/app/page.tsx"],"sourcesContent":["import Link from 'next/link';\nimport { getCurrentUser } from '@/lib/auth';\nimport { redirect } from 'next/navigation';\nimport styles from './page.module.css';\n\nexport default async function Home() {\n  const user = await getCurrentUser();\n\n  // If user is logged in, redirect to dashboard\n  if (user) {\n    redirect('/dashboard');\n  }\n\n  return (\n    <div className={styles.container}>\n      <div className={styles.particles} />\n      <div className={styles.glow} />\n      <div className={styles.glowSecondary} />\n      <div className={styles.glowTertiary} />\n\n      <main className={styles.main}>\n        <div className={styles.content}>\n          <div className={styles.badge}>\n            <span className={styles.badgeDot} />\n            Roblox Friend Request Filter\n          </div>\n\n          <h1 className={styles.title}>\n            Filter Bot Requests\n            <span className={styles.titleAccent}> Automatically</span>\n          </h1>\n\n          <p className={styles.description}>\n            Say goodbye to spam friend requests. Our intelligent filter detects and declines\n            bot accounts while accepting genuine users — all on autopilot.\n          </p>\n\n          <div className={styles.features}>\n            <div className={styles.feature}>\n              <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                <path d=\"M22 11.08V12a10 10 0 1 1-5.93-9.14\" />\n                <polyline points=\"22 4 12 14.01 9 11.01\" />\n              </svg>\n              <span>Auto-detect bots by account age</span>\n            </div>\n            <div className={styles.feature}>\n              <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                <path d=\"M22 11.08V12a10 10 0 1 1-5.93-9.14\" />\n                <polyline points=\"22 4 12 14.01 9 11.01\" />\n              </svg>\n              <span>Blacklist specific usernames</span>\n            </div>\n            <div className={styles.feature}>\n              <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n                <path d=\"M22 11.08V12a10 10 0 1 1-5.93-9.14\" />\n                <polyline points=\"22 4 12 14.01 9 11.01\" />\n              </svg>\n              <span>Accept real users automatically</span>\n            </div>\n          </div>\n\n          <a href=\"/api/auth/discord\" className={styles.discordButton}>\n            <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\n              <path d=\"M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028 14.09 14.09 0 0 0 1.226-1.994.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z\" />\n            </svg>\n            Login with Discord\n          </a>\n\n          <p className={styles.disclaimer}>\n            By logging in, you agree to our Terms of Service\n          </p>\n        </div>\n      </main>\n\n      <footer className={styles.footer}>\n        <p>© 2024 AntiBot. All rights reserved.</p>\n      </footer>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AACA;AACA;AAAA;AACA;;;;;AAEe,eAAe;IAC5B,MAAM,OAAO,MAAM,IAAA,oIAAc;IAEjC,8CAA8C;IAC9C,IAAI,MAAM;QACR,IAAA,iMAAQ,EAAC;IACX;IAEA,qBACE,8OAAC;QAAI,WAAW,yIAAM,CAAC,SAAS;;0BAC9B,8OAAC;gBAAI,WAAW,yIAAM,CAAC,SAAS;;;;;;0BAChC,8OAAC;gBAAI,WAAW,yIAAM,CAAC,IAAI;;;;;;0BAC3B,8OAAC;gBAAI,WAAW,yIAAM,CAAC,aAAa;;;;;;0BACpC,8OAAC;gBAAI,WAAW,yIAAM,CAAC,YAAY;;;;;;0BAEnC,8OAAC;gBAAK,WAAW,yIAAM,CAAC,IAAI;0BAC1B,cAAA,8OAAC;oBAAI,WAAW,yIAAM,CAAC,OAAO;;sCAC5B,8OAAC;4BAAI,WAAW,yIAAM,CAAC,KAAK;;8CAC1B,8OAAC;oCAAK,WAAW,yIAAM,CAAC,QAAQ;;;;;;gCAAI;;;;;;;sCAItC,8OAAC;4BAAG,WAAW,yIAAM,CAAC,KAAK;;gCAAE;8CAE3B,8OAAC;oCAAK,WAAW,yIAAM,CAAC,WAAW;8CAAE;;;;;;;;;;;;sCAGvC,8OAAC;4BAAE,WAAW,yIAAM,CAAC,WAAW;sCAAE;;;;;;sCAKlC,8OAAC;4BAAI,WAAW,yIAAM,CAAC,QAAQ;;8CAC7B,8OAAC;oCAAI,WAAW,yIAAM,CAAC,OAAO;;sDAC5B,8OAAC;4CAAI,SAAQ;4CAAY,MAAK;4CAAO,QAAO;4CAAe,aAAY;;8DACrE,8OAAC;oDAAK,GAAE;;;;;;8DACR,8OAAC;oDAAS,QAAO;;;;;;;;;;;;sDAEnB,8OAAC;sDAAK;;;;;;;;;;;;8CAER,8OAAC;oCAAI,WAAW,yIAAM,CAAC,OAAO;;sDAC5B,8OAAC;4CAAI,SAAQ;4CAAY,MAAK;4CAAO,QAAO;4CAAe,aAAY;;8DACrE,8OAAC;oDAAK,GAAE;;;;;;8DACR,8OAAC;oDAAS,QAAO;;;;;;;;;;;;sDAEnB,8OAAC;sDAAK;;;;;;;;;;;;8CAER,8OAAC;oCAAI,WAAW,yIAAM,CAAC,OAAO;;sDAC5B,8OAAC;4CAAI,SAAQ;4CAAY,MAAK;4CAAO,QAAO;4CAAe,aAAY;;8DACrE,8OAAC;oDAAK,GAAE;;;;;;8DACR,8OAAC;oDAAS,QAAO;;;;;;;;;;;;sDAEnB,8OAAC;sDAAK;;;;;;;;;;;;;;;;;;sCAIV,8OAAC;4BAAE,MAAK;4BAAoB,WAAW,yIAAM,CAAC,aAAa;;8CACzD,8OAAC;oCAAI,SAAQ;oCAAY,MAAK;8CAC5B,cAAA,8OAAC;wCAAK,GAAE;;;;;;;;;;;gCACJ;;;;;;;sCAIR,8OAAC;4BAAE,WAAW,yIAAM,CAAC,UAAU;sCAAE;;;;;;;;;;;;;;;;;0BAMrC,8OAAC;gBAAO,WAAW,yIAAM,CAAC,MAAM;0BAC9B,cAAA,8OAAC;8BAAE;;;;;;;;;;;;;;;;;AAIX"}}]
}