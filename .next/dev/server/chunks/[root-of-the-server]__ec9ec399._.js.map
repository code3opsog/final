{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/stashy/Desktop/Projects/Trend/src/lib/supabase.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js';\r\n\r\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!;\r\nconst supabaseKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!;\r\n\r\nexport const supabase = createClient(supabaseUrl, supabaseKey);\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM;AACN,MAAM;AAEC,MAAM,WAAW,IAAA,gMAAY,EAAC,aAAa"}},
    {"offset": {"line": 59, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/stashy/Desktop/Projects/Trend/src/app/api/admin/logs/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\r\nimport { supabase } from '@/lib/supabase';\r\nimport { cookies } from 'next/headers';\r\n\r\nexport async function GET(request: NextRequest) {\r\n    try {\r\n        const cookieStore = await cookies();\r\n        const sessionToken = cookieStore.get('session_token')?.value;\r\n\r\n        if (!sessionToken) {\r\n            return NextResponse.json({ error: 'Unauthorized' }, { status: 401 });\r\n        }\r\n\r\n        // Verify admin\r\n        const { data: session } = await supabase\r\n            .from('sessions')\r\n            .select('user_id')\r\n            .eq('token', sessionToken)\r\n            .single();\r\n\r\n        if (!session) {\r\n            return NextResponse.json({ error: 'Invalid session' }, { status: 401 });\r\n        }\r\n\r\n        const { data: user } = await supabase\r\n            .from('users')\r\n            .select('is_admin')\r\n            .eq('id', session.user_id)\r\n            .single();\r\n\r\n        if (!user?.is_admin) {\r\n            return NextResponse.json({ error: 'Admin access required' }, { status: 403 });\r\n        }\r\n\r\n        // Get pagination params\r\n        const searchParams = request.nextUrl.searchParams;\r\n        const page = parseInt(searchParams.get('page') || '1');\r\n        const limit = parseInt(searchParams.get('limit') || '50');\r\n        const offset = (page - 1) * limit;\r\n\r\n        // Fetch logs with account info\r\n        const { data: logs, count } = await supabase\r\n            .from('filter_logs')\r\n            .select(`\r\n                id,\r\n                action,\r\n                roblox_username,\r\n                roblox_user_id,\r\n                reason,\r\n                created_at,\r\n                roblox_accounts (\r\n                    account_name\r\n                )\r\n            `, { count: 'exact' })\r\n            .order('created_at', { ascending: false })\r\n            .range(offset, offset + limit - 1);\r\n\r\n        return NextResponse.json({\r\n            logs: logs || [],\r\n            pagination: {\r\n                page,\r\n                limit,\r\n                total: count || 0,\r\n                totalPages: Math.ceil((count || 0) / limit)\r\n            }\r\n        });\r\n    } catch (error) {\r\n        console.error('Logs error:', error);\r\n        return NextResponse.json({ error: 'Failed to fetch logs' }, { status: 500 });\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAEO,eAAe,IAAI,OAAoB;IAC1C,IAAI;QACA,MAAM,cAAc,MAAM,IAAA,4IAAO;QACjC,MAAM,eAAe,YAAY,GAAG,CAAC,kBAAkB;QAEvD,IAAI,CAAC,cAAc;YACf,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAe,GAAG;gBAAE,QAAQ;YAAI;QACtE;QAEA,eAAe;QACf,MAAM,EAAE,MAAM,OAAO,EAAE,GAAG,MAAM,oIAAQ,CACnC,IAAI,CAAC,YACL,MAAM,CAAC,WACP,EAAE,CAAC,SAAS,cACZ,MAAM;QAEX,IAAI,CAAC,SAAS;YACV,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAkB,GAAG;gBAAE,QAAQ;YAAI;QACzE;QAEA,MAAM,EAAE,MAAM,IAAI,EAAE,GAAG,MAAM,oIAAQ,CAChC,IAAI,CAAC,SACL,MAAM,CAAC,YACP,EAAE,CAAC,MAAM,QAAQ,OAAO,EACxB,MAAM;QAEX,IAAI,CAAC,MAAM,UAAU;YACjB,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAwB,GAAG;gBAAE,QAAQ;YAAI;QAC/E;QAEA,wBAAwB;QACxB,MAAM,eAAe,QAAQ,OAAO,CAAC,YAAY;QACjD,MAAM,OAAO,SAAS,aAAa,GAAG,CAAC,WAAW;QAClD,MAAM,QAAQ,SAAS,aAAa,GAAG,CAAC,YAAY;QACpD,MAAM,SAAS,CAAC,OAAO,CAAC,IAAI;QAE5B,+BAA+B;QAC/B,MAAM,EAAE,MAAM,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,oIAAQ,CACvC,IAAI,CAAC,eACL,MAAM,CAAC,CAAC;;;;;;;;;;YAUT,CAAC,EAAE;YAAE,OAAO;QAAQ,GACnB,KAAK,CAAC,cAAc;YAAE,WAAW;QAAM,GACvC,KAAK,CAAC,QAAQ,SAAS,QAAQ;QAEpC,OAAO,gJAAY,CAAC,IAAI,CAAC;YACrB,MAAM,QAAQ,EAAE;YAChB,YAAY;gBACR;gBACA;gBACA,OAAO,SAAS;gBAChB,YAAY,KAAK,IAAI,CAAC,CAAC,SAAS,CAAC,IAAI;YACzC;QACJ;IACJ,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,eAAe;QAC7B,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAuB,GAAG;YAAE,QAAQ;QAAI;IAC9E;AACJ"}}]
}